## ----setup, include=FALSE------------------------------------------------
library(methods)
knitr::opts_chunk$set(echo = TRUE, comment = "")

## ----vec-----------------------------------------------------------------
v = c(1, 4, 3, 7, 8)
print(v)

## ----vec2----------------------------------------------------------------
w = 1:5
print(w)

## ---- eval = FALSE-------------------------------------------------------
## w = 1:5
## w <- 1:5

## ----help, eval = FALSE--------------------------------------------------
## ?c
## help(topic = "c")

## ----help2, eval = FALSE-------------------------------------------------
## ??c
## help.search(pattern = "c")

## ----colon_twice, eval=FALSE---------------------------------------------
## utils::help("c")

## ----mat-----------------------------------------------------------------
m = matrix(1:12, nrow = 3)
print(m)

## ----arr-----------------------------------------------------------------
a = array(1:36, dim = c(3, 4, 3))

## ----dim-----------------------------------------------------------------
dim(a)

## ----vecSub--------------------------------------------------------------
print(v)
print(v[4])
print(v[1:3])
print(v[c(1,3,5)])

## ----matSub--------------------------------------------------------------
print(m[1,3])
print(m[1:2,3:4])

## ----matsub2-------------------------------------------------------------
print(m[,4])
print(m[2,])

## ----arrSub--------------------------------------------------------------
print(a[1,1,1])
dim(a[,4,])

## ----arrSub_bad, eval = FALSE--------------------------------------------
## a[,4]

## ----add_vw--------------------------------------------------------------
print(v); print(w)
print(v + 4)
print(v + w)
print(sqrt(w^2))

## ----true----------------------------------------------------------------
print(!FALSE)
print(TRUE | FALSE)
print(FALSE & FALSE)
c(all(c(TRUE, FALSE)), any(c(TRUE, FALSE)))

## ------------------------------------------------------------------------
which(v > 5)
v[ which(v > 5) ]

## ------------------------------------------------------------------------
v[ v > 5 ]

## ---- message=FALSE------------------------------------------------------
library(oro.nifti)
library(neurobase)

## ------------------------------------------------------------------------
t1 = readnii("training01_01_mprage.nii.gz")

## ----t1class-------------------------------------------------------------
class(t1)

## ------------------------------------------------------------------------
t1

## ------------------------------------------------------------------------
t1[5, 4, 3]

## ---- eval = FALSE-------------------------------------------------------
## t1[5, 4, ] # returns a vector of numbers (1-d)
## t1[, 4, ] # returns a 2-d matrix
## t1[1, , ] # returns a 2-d matrix
## t1[t1 < 500] # using logicals - all logical - same dimension

## ----adding_t1-----------------------------------------------------------
t1 + t1 + 2 # still a nifti

## ------------------------------------------------------------------------
class(t1 > 400) # still a nifti
head(t1 > 400) # values are now logical vs. numeric

## ------------------------------------------------------------------------
head(t1[ t1 > 400 ]) # produces a vector of numbers

## ------------------------------------------------------------------------
head(which(t1 > 400, arr.ind = TRUE))

## ------------------------------------------------------------------------
head(which(t1 > 400, arr.ind = FALSE))

## ------------------------------------------------------------------------
t1_copy = t1
t1_copy[ t1_copy > 400 ] = 400 # replaced these values!
max(t1_copy) # should be 400
max(t1) 

## ------------------------------------------------------------------------
writenii(nim = t1_copy, 
         filename = "training01_mprage_under400.nii.gz")
file.exists("training01_mprage_under400.nii.gz")

## ----vec_nifti, cache=FALSE----------------------------------------------
vals = c(t1)
class(vals)

## ----df------------------------------------------------------------------
df = data.frame(t1 = c(t1), mask = c(t1 > 400)); head(df)

## ------------------------------------------------------------------------
c(paste("img", ".nii.gz"), paste0("img", ".nii.gz"))
x = file.path("output_directory", paste0("img", ".nii.gz")); print(x)

## ------------------------------------------------------------------------
c(nii.stub(x), nii.stub(x, bn = TRUE))

